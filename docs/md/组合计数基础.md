# 基本计数规则

## 组合数学
* 组合数学：研究按照一定规则或条件安排或配置离散事物的相关问题

* 基本计数原理和组合存在性原理：
    * **加法原理和乘法原理**给出对集合元素的基本思维方式，即分类处理和分布处理，从而将计数问题进行分解化和模块化

    * **容斥原理**用于计数集合中满足某些性质或不满足某些性质的元素

    * **鸽笼定理**是一种组合存在性原理，用于证明某种离散结构的存在

* 基本的组合计数类型，即排列于组合

## 加法法则
* 加法法则：事件A有m种产生方式，事件B有n种产生方式，则“事件A或B”有**m+n**种产生方式

* 使用条件：事件A与B产生方式不重叠

* 推广：事件A1有p1种产生方式，事件A2有p2种产生方式，...，事件Ak有pk种产生方式，则“事件A1或A2或...或Ak”有**p1+p2+...+pk**种产生的方式

* 应用加法法则的关键在于，基于**不重复、不遗漏**的原则确定分类的标准

## 乘法法则
* 乘法法则：事件A有m种产生方式，事件B有n种产生方式，则“事件A与B”有**mn**种产生方式

* 使用条件：事件A与B产生方式彼此独立

* 适用问题：分布选取

* 推广：事件A1有p1种产生方式，事件A2有p2种产生方式，...，事件Ak有pk种产生方式，则“事件A1与A2与...与Ak”有**p1*p2*...*pk**种产生的方式
 
* 应用实例：
    1. 用集合A={1，2，3，4，5}的数字可组成多少个两位数？
        * 每个两位数是A的两个数字构成的**2元组**，即有序对

        * 用集合A的数字组成的两位数构成的集合可看做笛卡尔积A×A
            * 用集合A的数字组成的两位数等于|A×A|

            * 乘法原理此时可得|A×A|=|A|×|A|

    2. 用集合A={1，2，3，4，5}的数字可组成多少个数字**不同**的两位数？
        * 这时不等于A×A，应该等于`{<a,b>|a,b∈A且a≠b}`，是A×A的一个子集

        * 此时仍然可以使用乘法原理
            * 先确定个位数字有5种选择，对每个确定的个位数字，十位数字只有4种选择

            * 因此总共有`5*4=20`个用集合A的数字组成的数字不同的两位数

        * 若**先确定十位数字再确定个位数字**，则十位数字不能选0而有5个可选数字
            * 个位数字无论十位数选什么都有5个可选数字，由乘法原理，可组成`5*5=25`个数字不同的两位数
        
        * 但若**先确定个位数字再确定十位数字**，则
            * 个位数字0和个位数字选其它数字，十位数字可选的数字个数可能不同，此时无法直接使用乘法原理

        * 即先确定十位数字还是先确定个位数字影响乘法原理的应用

        * 为了能应用乘法原理，需要对前一个任务的可选方案进行分类处理
            * 若个位数选0，则视为由5个可选数字，这时数字不同的两位数有`1*5=5`个

            * 若个位数不选0，则无论个位选哪个数字，十位数都有4个可选数字，这时数字不同的两位数有`5*4=20`个

            * 最后用加法原理得到集合A的数字能组成的数字不同的两位数共有25个

![Alt text](image-271.png)

# 容斥原理基础
* 集合差计数公式：设A、B是有穷集合，则`|A-B|=|A|-|A⋂B|`
    * 集合族{A-B，A⋂B}是集合A的划分

* 两集合容斥原理：设A、B是有穷集合，则`|A⋃B|=|A|+|B|-|A⋂B|`
    * 集合族{A-B，A⋂B，B-A}是A⋃B的划分

* 三集合容斥原理：设A、B、C都是有穷集合，则`|A⋃B⋃C|=|A|+|B|+|C|-|A⋂B|-|A⋂C|-|B⋂C|+|A⋂B⋂C|`
    * 通过两容斥定理，以及集合恒等式可证明三集合容斥原理

* 容斥原理用于当**集合交**的元素个数比**集合并**的元素更容易计算的情况
    * 但计算同时满足某些性质的元素个数比计算满足某些性质之一的元素个数更容易计算时使用容斥定理

![Alt text](image-274.png)

# 鸽笼原理
* 一个组合存在定理，断定某种安排、配置或状态的必然存在性

* 设k是正整数，k+1只或更多的鸽子关到k个鸽笼里，则至少有一个鸽笼有两只或更多只鸽子

## 鸽笼原理实例1
* 从1到2n任取n+1个数，则至少有两个数，其中一个是另一个数的倍数
    1. 从2n个整数取出n+1个数看成鸽子

    2. 任何整数都可以表示成**`q*2^b`**的形式，这里奇数q导出了鸽笼

    3. 1到2n间只有n个奇数，则取出n+1个数中必然存在`q1*2^b1`和`q1*2^b2`这样两个其中一个数是另一个数的倍数

## 鸽笼原理实例2
* 正整数序列a1,a2,...,am中必存在若干个连续正整数的和是m的倍数
    * 即存在正整数k，l，1≤k<l≤m使得ak+a(k+1)+...+al是m的倍数

    * 考虑s1=a1，s2=a1+a2，...，sm=a1+a2+...+am，**这m个数整除m的余数**
        1. 若存在si整除m的数为0，则a1+a2+...+ai是m的倍数

        2. 若所有s的余数都大于0，则存在si、sj整除m的余数相等（s共有m个，而被m整除的余数有m-1个，就算s有m-1个不相同的余数，那剩下一个就必然有相同余数的了，也就是**鸽笼定理**），则`sj-si=a(i+1)+...+aj`是m的倍数（假设j>i）（两个相减就把余数给减掉了）

## 广义鸽笼原理
* 广义鸽笼原理：将N个物体放到k个盒子，则至少有一个盒子有⌈N/k⌉个物体（取顶符号，即不小于它的最小整数）

* 将**至少有一个盒子至少有的物体**称为“最小容量”
    * 最小容量=⌈物体总数/盒子数⌉
        * 即保证至少有一个盒子有想要的容量，用物体总数除以盒子数，如有余数或没有余数，直接取顶即可得出最小容量

    * 物体总数的最小值=（最小容量-1）*盒子数+1
        * 要保证物体总数的最小值，那就让一个盒子是最小容量，其它盒子为最小容量-1就能保证此时物体的数量能得到要求的最小容量
    
    * 盒子数的最大值=⌊（物体总数-1）/（最小容量-1）⌋
        * 要保证盒子数为最大值，也就是使所有盒子都放最小容量-1，就一个盒子放最小容量

# 排列组合
* 选取问题：设n元集合S，从S中选取r个元素

* 根据是否有序，是否允许重复，将该问题分为四个子问题

||不重复选取|重复选取|
|-|-|-|
|有序选取|集合的排列|多重集的排列|
|无序选取|集合的组合|多重集的组合|

* 排列：设S为n元集
    * 从S中有序选取的r个元素称为S的一个r排列，S的不同r排列总数记作Prn（r是上缀，n是下缀）或`P(n,r)`，r=n的排列是S的全排列
    
    * 定理：设n，r为自然数，规定0!=1，则有下图

        ![Alt text](image-275.png)

* 组合：设S为n原集
    * 从S种无序选取的r个元素称为S的一个r组合，S的不同r组合总数记作Crn（r是上缀，n是下缀）或`C(n,r)`

    * 组合数C(n,r)也称**二项式系数**，这时通常记作`(nr)`（n在上面，r在下面）

    * 子集解释：从n元素的集合S中选取r元素（不确定数目）构成S的子集数
        * S的r-组合与S的r-元素子集一一对应

    * 二进制解释：长度为n且含有r个1个二进制串数

    ![Alt text](image-276.png)

    ![Alt text](image-277.png)
    
# 多重排列组合
* 重复的排列与组合是指用于排列的元素或者选取的元素可以重复，所以不说$n$个物体，而说$n$类或$n$种物体

* 定义：多重集$S={\{n_1\cdot a_1,n_2\cdot a_2,...,n_k\cdot a_k\}}，n=n_1+n_2+...+n_k$表示$S$中元素总数
    1. 从$S$中有序选取的$r$个元素称为多重集$S$的一个$r$排列。$r=n$称为全排列

    2. 从$S$中无序选取的$r$个元素称为多重集$S$的一个$r$组合

* 定理：设$S=\{n1\cdot a1,n2\cdot a2,...,n_k \cdot a_k\}$为多重集
    1. $S$的全排列数是$\frac{n!}{n_1!n_2!...n_k!}$

    2. 若$r<=n_i，i=1,2,...,k$，那么$S$的$r$排列数是$k^r$

    3. 若$r<=n_i，i=1,2,...,k$，那么$S$的$r$组合数是$N=C(k+r-1,r)$

        ![Alt text](image-119.png)
        
# 二项式定理与组合等式

# 非降路径问题

$[ \sum_{i=a}^{b} (-d) ]$