# 关系的定义

* 有序对：两个元素$x$、$y$按照一定顺序组成的二元称为有序对，记作$<x,y>$
    * 有序性：当$x≠y$时，$<x,y>≠<y,x>$

* 笛卡儿积：设$A$、$B$为**集合**，$A$与$B$的笛卡儿积记作$A×B$，即$A×B=\{<x,y>|x∈A∧y∈B\}$
    1. 不适合交换律：$A×B≠B×A(A≠B,A≠∅,B≠∅)$

    2. 不适合结合律：$(A×B)×C≠A×(B×C)(A≠∅,B≠∅,C≠∅)$

    3. 对于并或交运算满足分配律：
        * $A×(B∪C) = (A×B)∪(A×C)$和$(B∪C)×A = (B×A)∪(C×A)$

        * $A×(B∩C) = (A×B)∩(A×C)$和$(B∩C)×A = (B×A)∩(C×A)$

    4. 若$A$或$B$中有一个为空集，则$A×B$就是**空集**：$A×∅=∅×B=∅$

    5. 若 $|A|=m$和$|B|= n$，则$|A×B|=mn$，取模运算表示**集合中的元素个数**

* 有序$n$元组和$n$阶笛卡尔积
    * 有序$n$元组：由$n$个元素$x_1$，$x_2$，...，$x_n$按照一定顺序排列构成，记作$<x_1,x_2,...x_n>$

    * $n$阶笛卡尔积：设$A_1$，$A_2$，...，$A_n$为集合，称$A_1×A_2×...×A_n=\{<x_1,x_2,...,x_n>|x_i∈A_i,i=1,2,...,n\}$

* 二元关系：集合**A到B的二元关系R**定义为笛卡尔积A×B的子集，即$R⊆A×B$，简称**关系**，记作$R$
    * 当$A=B$时，称$R⊆A×A$为**集合A上的二元关系**

    * 如$<x,y>∈R$，可记作$xRy$
        
        ![Alt text](image.png)

# 关系的表示
* 设$A$为任意集合，$∅$是$A$上的关系，称为**空关系**

* 定义：$E_A$、$I_A$分别称为**全域关系**与**恒等关系**
    * $E_A=\{<x,y>|x∈A ∧ y∈A\}=A×A$
    
    * $I_A=\{<x,x>|x∈A\}$

* 关系矩阵：若$A=\{x_1,x_2,...,x_n\}$，$B=\{y_1,y_2,...,y_n\}$，$R$是从$A$到$B$的关系，$R$的关系矩阵是布尔矩阵$M_R=[r_{ij}]_{m×n}$，其中$r_{ij}=1⟺<x_i,y_j>∈R$

* 关系图：若$A=\{x_1,x_2,...,x_m\}$，$R$是在$A$上的关系，$R$的关系图是$G_R=<A,R>$，其中$A$为结点集，$R$为边集；如果$<x_i,x_j>$属于关系$R$，在图中就有一条从$x_i$到$x_j$的有向边

![Alt text](image-173.png)   

# 关系的基本运算

* 定义域：$domR=\{x|∀y(<x,y> ∈ R)\}$

* 值域：$ranR=\{y|∀x(<x,y> ∈ R)\}$

* 域：$fldR=domR∪ranR$

* $R$的逆：$R^{-1}=\{<y,x>|<x,y> ∈ R\}$

* $R$与$S$的合成（复合）：$R∘S=\{<x,z>|∃y(<x,y> ∈ R ∧ <y,z> ∈ S)\}$

* 设$F$是任意的关系
    * $(F^{-1})^{-1} = F$

    * $domF^{-1} = ranF$和$ranF^{-1} = domF$

* 设$R$为集合$A$上的关系
    * $R∘I_A = I_A ∘ R = R$

# 关系矩阵计算关系

![Alt text](image-1.png)

![Alt text](image-2.png)
* 设R为A上的关系，则`R∘IA=IA∘R=R`

# 关系的幂运算
* 设$R$为$A$上的关系，$n$为自然数，则$R$的$n$次幂是
    1. $R^0=\{<x,x>|x∈A\}=I_A$

    2. $R^{n+1}=R^n∘R$

* 设R是A上的关系，m、n∈N，则
    * $R^m∘R^n=R^{m+n}$

    * $(R^m)^n=R^{mn}$

# 关系的性质

## 自反性和反自反性
* 设$R$为$A$上的关系
    * 若$∀x(x∈A → <x,x>∈R)$，则R在A上是**自反**的
        
    * 若$∀x(x∈A → <x,x>∉R)$，则R在A上是**反自反**的

||自反性|反自反性|
|:-|:-|:-|
|表达式|IA⊆R|R⋂IA=∅|
|关系矩阵|主对角线元素都是1|主对角线元素全是0|
|关系图|每个顶点都有环|每个顶点都没有环|

## 对称性和反对称性
* 设R为A上的关系
    * 若$∀x∀y(x,y∈A∧<x,y>∈R  → <y,x>∈R)$，则称$R$为$A$上**对称**的关系

    * 若$∀x∀y(x,y∈A∧<x,y>∈R∧<y,x>∈R→x=y)$，则称R为A上**反对称**的关系

||对称性|反对称性|
|:-|:-|:-|
|表达式|R=R^(-1)|R⋂R^(-1)⊆IA|
|关系矩阵|矩阵是对称矩阵|若rij=1，且i≠j，则rij=0|
|关系图|如果两个顶点之间有边，一定是一对反向相反的边（无单边）|如果两点之间有边，一定是一条有向边（无双向边）|

## 传递性
* 设$R$为A上的关系
    * 若$∀x∀y∀z(x,y,z∈A ∧ <x,y>∈R ∧ <y,z>∈R → <x,z>∈R)$，则称$R$是$A$上的**传递**关系

||传递性|
|:-|:-|
|表达式|R∘R⊆R|
|关系矩阵|对$M^2$中1所在位置，M中位置都是1|
|关系图|如果顶点$x_i$到$x_j$有边，$x_j$到$x_k$有边，则从$x_i$到$x_k$也有边|

## 关系的闭包

![Alt text](image-270.png)

* 设$R$是非空集合$A$上的关系，$R$的**自反（对称或传递）闭包**是$A$上的关系$R'$，使得$R'$满足以下条件：
    1. $R'$是**自反的（对称的或传递的）**
    
    2. $R⊆R'$
    
    3. 对$A$上任何包含$R$的自反（对称或传递）关系$R''$有$R'⊆R''$

* 即能使得$R$满足**自反（对称或传递）性质**的**最小**的关系集合

* $R$的**自反**闭包记作$r(R)$，**对称**闭包记作$s(R)$，**传递**闭包记作$t(R)$

* 定理：$R$为$A$上的关系，则有
    1. 关系是**自反的**当且仅当它包含恒等关系
        * 将**恒等关系**中的有序对添加到关系可得**自反闭包**
        
        * $r(R)=R⋃I_A$
    
    2. 关系是**对称的**当且仅当它等于它的逆
        * 将**逆关系**的有序对添加到关系可得**对称闭包**

        * $s(R)=R⋃R^{-1}$

    3. 关系的**传递闭包**是包含这个关系的最小传递关系
        * $t(R)=R⋃R^2⋃R^3⋃...⋃R^n$

## 等价关系和偏序关系
* 设$R$为非空集合$A$上的关系，如果$R$是**自反的、对称的和传递的**，则称$R$为$A$上的**等价关系**
    * 设$R$是一个等价关系，若$<x,y>∈R$，称$x$等价于$y$，记作$x\sim y$

    ![Alt text](image-11.png)

* 非空集合$A$上的**自反、反对称和传递**的关系，记作偏序关系$⪯$，如果$<x,y>∈⪯$，则记作$x⪯y$，读作$x$小于或等于$y$

    ![Alt text](image-12.png)

## 关系上的计数
* 设$A$、$B$为集合，$A×B$的任何子集所定义的二元关系叫做从$A$到$B$的**二元关系**，当$A=B$时则叫做$A$上的**二元关系**
    * $|A|=n,|B|=m,|A×B|=nm$

    * $A×B$的子集有$2^{nm}$个，所以从$A$到$B$有$2^{nm}$个不同的二元关系

    * 从上可得出，$|A|=n$，$A$上有$2^{n^2}$个不同的二元关系
